{% extends "mastero-base.html" %}

{% block content %}

    <div class="bg-gray-50 flex flex-col justify-center pt-12 sm:px-6 lg:px-8">
        <div class="sm:mx-auto sm:w-full sm:max-w-md">
        <img class="mx-auto h-12 w-auto" src="{{ url_for('static', filename='img/mastero-logo-black.png') }}" alt="Mastero">
        <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">
            Create an account
        </h2>
        <p class="mt-2 text-center text-sm text-gray-600">
            Or
            <a href="{{ url_for('login') }}" class="font-medium text-indigo-600 hover:text-indigo-500">
            sign into your account
            </a>
        </p>
        </div>

        {% include 'flash-message.html' %}

        <div class="mt-8 sm:mx-auto sm:w-full sm:max-w-md">
        <div class="bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10">
            <form class="space-y-6" action="" method="post">
                {{ form.hidden_tag() }}

            <div>
                <label for="forename" class="block text-sm font-medium text-gray-700">
                    {{ form.forename.label }}
                </label>
                <div class="mt-1">
                    {{ form.forename(size=32, placeholder="John", class_="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm") }}
                </div>
                {% for error in form.forename.errors %}
                <span style="color: red;">{{ error }}</span>
                {% endfor %}
            </div>

            <div>
                <label for="surname" class="block text-sm font-medium text-gray-700">
                    {{ form.surname.label }}
                </label>
                <div class="mt-1">
                    {{ form.surname(size=32, placeholder="Doe", class_="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm") }}
                </div>
                {% for error in form.surname.errors %}
                <span style="color: red;">{{ error }}</span>
                {% endfor %}
            </div>

            <div>
                <label for="email" class="block text-sm font-medium text-gray-700">
                    {{ form.email.label }}
                </label>
                <div class="mt-1">
                    {{ form.email(size=32, placeholder="johndoe@email.com", class_="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm") }}
                </div>
                {% for error in form.email.errors %}
                <span style="color: red;">{{ error }}</span>
                {% endfor %}
            </div>

            <div class="mb-4">
                <label for="phone" class="block text-sm font-semibold text-gray-700">{{ form.phone.label }}</label>
                <div class="mt-1">
                    {{ form.phone(size="16", id="phone", class_="appearance-none block bg-white w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" ) }}
                    {% for error in form.phone.errors %}
                    <span style="color: red;">{{ error }}</span>
                    {% endfor %}
                </div>
            </div>
            
            <div>
                <label for="password" class="block text-sm font-medium text-gray-700">
                    {{ form.password.label }}
                </label>
                <div class="mt-1">
                    {{ form.password(size=64, class_="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm") }}
                </div>
                {% for error in form.password.errors %}
                <span style="color: red;">{{ error }}</span>
                {% endfor %}
            </div>

            <div>
                <label for="password" class="block text-sm font-medium text-gray-700">
                    {{ form.password2.label }}
                </label>
                <div class="mt-1">
                    {{ form.password2(size=64, class_="appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm") }}
                </div>
                {% for error in form.password2.errors %}
                <span style="color: red;">{{ error }}</span>
                {% endfor %}
            </div>

            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    {{ form.agree(class_="h-10 w-10 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded") }} 

                    <label for="agree" class="ml-2 block text-sm text-gray-900">
                        By ticking this box I certify that I have read and agree to both the <a class="font-medium text-indigo-600 hover:text-indigo-500" href="{{ url_for('terms') }}">Terms of Service</a> and the <a class="font-medium text-indigo-600 hover:text-indigo-500" href="{{ url_for('privacy') }}">Privacy Policy</a>. 
                    </label>
                </div>
            </div>

            <div>
                {{ form.submit(class_="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500") }}
            </div>
            </form>

            <p class="mt-3 text-sm">Already have an account? <a class="font-medium text-indigo-600 hover:text-indigo-500" href="{{ url_for('login') }}">Sign in!</a></p>

            <div class="mt-6">

            </div>
        </div>
        </div>
    </div>

    <script nonce="">
        var wtf_phone_field = document.getElementById('phone');
        wtf_phone_field.style.position = 'absolute';
        wtf_phone_field.style.top = '-9999px';
        wtf_phone_field.style.left = '-9999px';
        wtf_phone_field.parentElement.insertAdjacentHTML('beforeend', '<div><input type="tel" id="_phone" class="appearance-none block bg-white w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"></div>');
        var fancy_phone_field = document.getElementById('_phone');
        var fancy_phone_iti = window.intlTelInput(fancy_phone_field, {
            separateDialCode: true,
            utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/16.0.4/js/utils.js",
        });
        fancy_phone_iti.setNumber(wtf_phone_field.value);
        fancy_phone_field.addEventListener('blur', function() {
            wtf_phone_field.value = fancy_phone_iti.getNumber();
        });
      </script>
    
{% endblock %}
